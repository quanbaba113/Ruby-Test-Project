include Request

AGENA_GUID_TITLE_PER_REGION = {
    US:  {
        "My 50 Page Plan" => "f73a53f8-c207-4fcd-8228-e265cf68d19f",
        "My 100 Page Plan" => "be86e9c2-ef37-4519-9665-3cf0aa483588",
        "My 300 Page Plan" => "477937ed-51ce-464b-9d47-096aa1ceb67b",
        "My 500 Page Plan" => "03ca853c-9ea5-4641-b422-fb4fc52eb6d9",
        "My 15 Page Plan" => "d57f3dac-9345-4cdb-8b50-d5540ed876c5",
        "My 15 (US$ 0.99) Page Plan" => "916798cd-b10a-4570-9e0c-1174cfd8c8fa",
        "My 400 Page Plan" => "9a265fb7-0077-4575-83f6-24945da6a9d4",
        "My 1000 Page Plan" => "04252d3c-016e-4736-967f-efc35c68adf1",
        "My 2000 Page Plan" => "b4b33a5d-ea16-4076-957d-8f4aa0f08373"
    },
    UK: {
        "My 50 Page Plan" => "61300129-e8ff-4456-9378-3f9bb2cd82a9",
        "My 100 Page Plan" => "604a59d5-5390-4af6-ae01-9a21c3a25dcb",
        "My 300 Page Plan" => "899953a6-690a-4293-b7bf-04e9a303612a",
        "My 15 Page Plan" => "aada38b8-e264-4461-9e5a-8c60588db9e4"
    },
    FR: {
        "My 50 Page Plan" => "01447003-7197-49e6-81d8-111b2fcbaa82",
        "My 100 Page Plan" => "b839a015-3e66-417e-98cf-dad47a058c22",
        "My 300 Page Plan" => "b314704e-6117-4d1e-9e20-d9593b01dd26"
    },
    DE: {
        "My 50 Page Plan" => "0716f65d-06e3-4c53-9120-8faffbbd9a6c",
        "My 100 Page Plan" => "7d09fb94-caaa-4795-b4d5-9b5f1796ade5",
        "My 300 Page Plan" => "ca0832ab-14d2-4dd5-967e-80ca55ea6d8d"
    },
    CA: {
        "My 50 Page Plan" => "fa889a2b-662c-471b-a21a-8abf65bdc45c",
        "My 100 Page Plan" => "60e1a50f-a3b5-4020-a154-06dc5166d5b4",
        "My 300 Page Plan" => "3ee7b81f-1274-4abd-8401-03314ed45b58",
        "My 15 Page Plan" => "837ccb15-b41d-4656-85ab-1fdb009147fa"
    },
    ES: {
        "My 50 Page Plan" => "f5aa702f-8f6d-42fa-aa3b-8101bdb15e88",
        "My 100 Page Plan" => "50174cc3-6829-4bd5-b2ae-707f7df28f86",
        "My 300 Page Plan" => "3d5dda91-7e87-4244-8947-cadde546667c"
    },
    IT: {
        "My 50 Page Plan" => "660271ea-321c-4516-bd1d-0473cacf165e",
        "My 100 Page Plan" => "21e13603-88b4-4844-91c9-e76964651df5",
        "My 300 Page Plan" => "6a6a80c5-dcce-4c10-8e04-1b769f5b1b4c",
    },
    AU: {
        "My 50 Page Plan" => "9fdcd6d0-acb6-4c05-8156-6eda51082702",
        "My 100 Page Plan" => "14ecc8f7-569f-4a53-93ac-06ab39f7fe89",
        "My 300 Page Plan" => "245647d1-5d56-47ca-9118-f26cebbd4fa9"
    },
    NZ: {
        "My 50 Page Plan" => "4e86c214-8602-412a-a51e-e9d18ae02558",
        "My 100 Page Plan" => "70eff728-f508-45ac-8bd8-9cf34f35af62",
        "My 300 Page Plan" => "1eb5c650-b686-400c-9b41-1d5e8c446002"
    }
}

AGENA_SEEDS_PROMO_CODES_VALIDATES_GUID_ONLY = ['BOUL3MOIS FR', 'INSTANT3 US', 'INSTANT3 CA', 'FREEINK CA','HP3FREE CA','HOLIDAY15 CA','NEWYEAR16 CA','2MONTHSFREESM CA','2MONTHSFEECB CA','2MONTHSFREECM CA','2MONTHSFREECU CA','2MONTHSFREECQ CA','2MONTHSFREECS CA','2MONTHSFREECT CA','2MONTHSFREETL CA','2MONTHSFREEWK CA','2MONTHSFREEWM CA','2MONTHSFREEFE CA','2MONTHSFREE CA','2MONTHSFREEDIB CA','2MONTHSFREEMI CA','2MONTHSFREEJA CA','2MONTHSFREECB CA','INK2MONTHS CA','SPRING3 CA','SCHOOL3 CA','INSTANT3 CA','FREE4APPS DE','HPIIGRATIS DE','HP123INK DE','SIGNUP1 DE','SIGNUP2 DE','HPINSTANTINK DE','TINTEBITTE DE','GRATIS DE','DEC2015 DE','MAERZ16 DE','GRATISMAERZ16 DE','TESTER16 DE','GRATIS6830 DE','FREEINK DE','GRATIS3 DE','JULI DE','HP123INK ES','SIGNUP1 ES','SIGNUP2 ES','HPESIIGRATIS ES','HPINSTANTINK ES','DEC2015 ES','6MESESGRATIS ES','FREEINK ES','FREE4APPS FR','HPII2MOIS FR','HP123INK FR','SIGNUP1 FR','SIGNUP2 FR','2MOIS FR','DEC2015 FR','3MOIS FR','HP6MOIS FR','FREEINK FR','FREE4APPS UK','HP123INK UK','SIGNUP1 UK','SIGNUP2 UK','FREEINK UK','DEC2015 UK','UK2MONTHS UK','2MONTHSUK UK','UK2FREE UK','3FREEMONTHS US','6FREEMONTHS US','1MONTH US','1FREE US','HPSPECIAL US','FREE4APPS US','FREETRIAL US','HPCSPECIAL US','FREEINK US','FREESPECIAL US','2MONTHSPECIAL US','HPREWARDS US','HPC1MONTH US','3MONTHSFREE US','3MONTHS US','INSTANTINK US','INK25 US','3FREE US','OD2015 US','HP3FREE US','WEMISSYOU US','MCFREE US','HPSHOPPING US','BOUNCEHPS US','3FREEINK US','HOLIDAY15 US','NEWYEAR16 US','2MONTHSFREESM US','2MONTHSFEECB US','2MONTHSFREECM US','2MONTHSFREECU US','2MONTHSFREECQ US','2MONTHSFREECS US','2MONTHSFREECT US','2MONTHSFREETL US','2MONTHSFREEWK US','2MONTHSFREEWM US','2MONTHSFREEFE US','2MONTHSFREE US','2MONTHSFREEDIB US','2MONTHSFREEMI US','2MONTHSFREEJA US','6freeink US','2MONTHSFREECB US','INK2MONTHS US','SPRING3 US','SCHOOL3 US','INSTANT3 US','BESTBUY3 US','2MONTHSDJUK UK','2MONTHSDJ3630 DE','2MONTHSDJ3630 FR','2MONTHSDJ3630 ES','BOUL4MOIS FR']

AGENA_SEEDS_PROMO_CODES_VALIDATES_GUID_EK = ['1MONATGRATIS DE', 'FREEMONTH US', '2FREEMONTHS US', '2MOSFREE US', 'SIGNUPFREE US']

AGENA_SEEDS_DISTINCT_OFFERS_BY_NAME = ["AU Consumer Default Offer","Best Buy II 1.5 Customer Promo","BlogHer opportunity","CA Consumer Default Offer","DE Consumer Default Offer","ES Consumer Default Offer","FR Consumer Default Offer","HP 61 Clr/Blk Inst Ink Cmbo w/Card 2-Pk","HP DE Support 100pg","HP DE Support 300pg","HP DE Support 50pg","HP FR Support 100pg","HP FR Support 300pg","HP FR Support 50pg","HP Instant Ink 100 page per month plan for France","HP Instant Ink 100 page per month plan for Germany ","HP Instant Ink 100 page per month plan for Spain","HP Instant Ink 100 page per month plan HP Support for France without encoding","HP Instant Ink 100 page per month plan HP Support for Germany without encoding","HP Instant Ink 100 page per month plan HP Support for Spain without encoding","HP Instant Ink 100 page per month plan HP Support for UK without encoding","HP Instant Ink 100 page per month plan with JLP encoding","HP Instant Ink 100 page per month Seed Units","HP Instant Ink 100p Carrefour Spain Plan","HP Instant Ink 100pg AMZ Plan","HP Instant Ink 100pg BB Canada Web Plan","HP Instant Ink 100pg BHN Plan F6T37AN","HP Instant Ink 100pg Darty Web Plan","HP Instant Ink 100pg El Corte Spain Plan","HP Instant Ink 100pg GB Plan","HP Instant Ink 100pg HHO Canada Plan","HP Instant Ink 100pg OMX Web Plan","HP Instant Ink 100pg OMX/OD Plan","HP Instant Ink 100pg Plan 2014","HP Instant Ink 100pg Rymans UK Web Plan","HP Instant Ink 1Free Argos Any Plan M0J00AE","HP Instant Ink 1Free Cdiscount 100p Pln","HP Instant Ink 1Free Cdiscount 300p Pln","HP Instant Ink 1Free Cdiscount 50p Pln","HP Instant Ink 1Free HP Store FR Any Pln","HP Instant Ink 2 months free 100pg Plan for DSG without encoding","HP Instant Ink 2Free 100pg France Flyer","HP Instant Ink 2Free Argos Any Plan","HP Instant Ink 2Free Argos Any Pln Flyer","HP Instant Ink 2Free Boulanger FR 100p Plan","HP Instant Ink 2Free DSG Any Plan","HP Instant Ink 2Free EC 100pg Flyer","HP Instant Ink 2Free Eures 100pg Flyer","HP Instant Ink 2Free FNAC 100pg Flyer","HP Instant Ink 2Free HHO UK 300pg Plan","HP Instant Ink 2Free HP Store UK Any Plan","HP Instant Ink 2Free JLP Any Plan","HP Instant Ink 2Free Medion 100pg Flyer","HP Instant Ink 2Free MSH Any Pg Plan","HP Instant Ink 2Free Worten 100pg Flyer","HP Instant Ink 300 page per month plan for France","HP Instant Ink 300 page per month plan for Germany ","HP Instant Ink 300 page per month plan for Spain","HP Instant Ink 300 page per month plan HP Support for France without encoding","HP Instant Ink 300 page per month plan HP Support for Germany without encoding","HP Instant Ink 300 page per month plan HP Support for Spain without encoding","HP Instant Ink 300 page per month plan HP Support for UK without encoding","HP Instant Ink 300 page per month plan with JLP encoding","HP Instant Ink 300p Carrefour Spain Plan","HP Instant Ink 300pg AMZ Plan","HP Instant Ink 300pg BB Canada Web Plan","HP Instant Ink 300pg BHN Plan F6T38AN","HP Instant Ink 300pg Darty Web Plan","HP Instant Ink 300pg El Corte Spain Plan","HP Instant Ink 300pg GB Plan","HP Instant Ink 300pg HHO Canada Plan","HP Instant Ink 300pg OMX Web Plan","HP Instant Ink 300pg OMX/OD Plan","HP Instant Ink 300pg Plan 2014","HP Instant Ink 300pg Rymans UK Web Plan","HP Instant Ink 3Free HPC Upgrd Any Plan","HP Instant Ink 3Free TESCO 50pg Plan","HP Instant Ink 3Free Tesco UK 50pg Flyer","HP Instant Ink 50 page per month plan for France","HP Instant Ink 50 page per month plan for Germany ","HP Instant Ink 50 page per month plan for Spain","HP Instant Ink 50 page per month plan HP Support for France without encoding","HP Instant Ink 50 page per month plan HP Support for Germany without encoding","HP Instant Ink 50 page per month plan HP Support for Spain without encoding","HP Instant Ink 50 page per month plan HP Support for UK without encoding","HP Instant Ink 50 page per month plan with JLP encoding","HP Instant Ink 500 page Plan","HP Instant Ink 50pg AMZ Plan","HP Instant Ink 50pg BB Canada Web Plan","HP Instant Ink 50pg BHN Plan F6T36AN","HP Instant Ink 50pg Carrefour Spain Plan","HP Instant Ink 50pg Darty Web Plan","HP Instant Ink 50pg El Corte Spain Plan","HP Instant Ink 50pg GB Plan","HP Instant Ink 50pg HHO Canada Plan","HP Instant Ink 50pg OMX Web Plan","HP Instant Ink 50pg OMX/OD Plan","HP Instant Ink 50pg Plan 2014","HP Instant Ink 50pg Rymans UK Web Plan","HP Instant Ink 6Free 300pg NA Plan L0S98AN","HP Instant Ink Any Page BB Plan","HP Instant Ink Any w/ Free for HSN Plan","HP Instant Ink Boulanger 100pg Ecode Pln","HP Instant Ink Boulanger 300pg Ecode Pln","HP Instant Ink Boulanger 50pg Ecode Pln","HP Instant Ink CAN Any15/50/100/300p Pln","HP Instant Ink for Best Buy 100pg Plan 2014","HP Instant Ink for Best Buy 100pg Plan Canada","HP Instant Ink for Best Buy 300pg Plan 2014","HP Instant Ink for Best Buy 300pg Plan Canada","HP Instant Ink for Best Buy 50pg Plan 2014","HP Instant Ink for Best Buy 50pg Plan Canada","HP Instant Ink for HHO 50pg UK Plan","HP Instant Ink for HP Store 100p UK Plan","HP Instant Ink for HP Store 300p UK Plan","HP Instant Ink for OD 100pg Web Plan","HP Instant Ink for OD 300pg Web Plan","HP Instant Ink for OD 50pg Web Plan","HP Instant Ink for Staples 100p Web Plan","HP Instant Ink for Staples 100pg Plan Canada","HP Instant Ink for Staples 100pg UK Plan","HP Instant Ink for Staples 300p Web Plan","HP Instant Ink for Staples 300pg Plan Canada","HP Instant Ink for Staples 300pg UK Plan","HP Instant Ink for Staples 50p Web Plan","HP Instant Ink for Staples 50pg Plan Canada","HP Instant Ink for Staples 50pg UK Plan","HP Instant Ink HSN 100 page per month plan without encoding","HP Instant Ink HSN1 Any Page Plan","HP Instant Ink HSN2 Any Page Plan","HP Instant Ink Prepaid 120 Any Plan","HP Instant Ink Prepaid 20 Any Pln","HP Instant Ink Prepaid 240 Any Plan","HP Instant Ink Prepaid 30 Any Pln","HP Instant Ink Prepaid 60 Any Pg Plan","HP Instant Ink Prepaid 60 Costco Any Pln","HP Instant Ink Pre-Sale 1Free Any Plan CA ","HP Instant Ink Pre-Sale 1Free Any Plan US","HP Instant Ink Promo 300p CAN Press Plan","HP Instant Ink Promo 300p CAN Social Pln","HP Instant Ink Promo 300p Train Any Pln","HP Instant Ink Promo 300pg Canada Plan","HP Instant Ink Promo 300pg Plan F6U91AN","HP Instant Ink QVC1 Any Page Plan","HP Instant Ink QVC2 Any Page Plan","HP Instant Ink UK 15pg Flyer","HP Instant Ink US 15pg Flyer","HP Instant Ink US Any 15/50/100/300p Pln","HP Instant Ink Web 100pg Plan","HP Instant Ink Web 300pg Plan","HP Instant Ink Web 50pg Plan","HP Support 100pg Plan","HP Support 300pg Plan","HP Support 50pg Plan","HP Support HHO Derivative Offer","HP Support II 1.5 Customer Promo","HP UK Support 100pg","HP UK Support 300pg","HP UK Support 50pg","IT Consumer Default Offer","LUPs Pilot - AMAZON","LUPs Pilot - D&H DISTRIBUTING COMPANY","LUPs Pilot - D&H DISTRIBUTING COMPANY 2","LUPs Pilot - FRY\"S","LUPs Pilot - FRY\"S ELECTRONICS INC","LUPs Pilot - GENERIC RETAILER","LUPs Pilot - HP Home & Home Office Store","LUPs Pilot - INGRAM MICRO INC.","LUPs Pilot - New Age","LUPs Pilot - SYNNEX","LUPs Pilot - SYNNEX 2","LUPs Pilot - TARGET STORES","LUPs Pilot - TARGET.COM","LUPs Pilot - TECH DATA PRODUCT MANAGEM","LUPs Pilot - UNITED STATIONERS SUPPLY","NZ Consumer Default Offer","Office Depot II 1.5 Customer Promo","Shiyun Prepaid Test Codes","UK Consumer Default Offer","UK Consumer Freemium Offer","US Consumer 99 Cent Offer","US Consumer Default Offer","US Consumer Freemium Offer"]

AGENA_SEEDS_DISTINCT_OFFERS_CLEARING_HOUSE_HPAGENA_BY_NAME = ["HP Instant Ink Any Page BB Plan","AU Consumer Default Offer","CA Consumer Default Offer","HP Instant Ink 50pg HHO Canada Plan","HP Instant Ink 100pg HHO Canada Plan","HP Instant Ink 300pg HHO Canada Plan","HP Instant Ink 50pg BB Canada Web Plan","HP Instant Ink 100pg BB Canada Web Plan","HP Instant Ink 300pg BB Canada Web Plan","HP Instant Ink Pre-Sale 1Free Any Plan CA ","HP Instant Ink Promo 300pg Canada Plan","HP Instant Ink Promo 300p CAN Press Plan","HP Instant Ink Promo 300p CAN Social Pln","HP Instant Ink CAN Any15/50/100/300p Pln","DE Consumer Default Offer","HP DE Support 50pg","HP DE Support 100pg","HP DE Support 300pg","HP Instant Ink 2Free MSH Any Pg Plan","HP Instant Ink 2Free Medion 100pg Flyer","HP Instant Ink 2Free Eures 100pg Flyer","HP Instant Ink 50 page per month plan HP Support for Germany without encoding","HP Instant Ink 100 page per month plan HP Support for Germany without encoding","HP Instant Ink 300 page per month plan HP Support for Germany without encoding","ES Consumer Default Offer","HP Instant Ink 2Free FNAC 100pg Flyer","HP Instant Ink 50pg El Corte Spain Plan","HP Instant Ink 100pg El Corte Spain Plan","HP Instant Ink 300pg El Corte Spain Plan","HP Instant Ink 2Free EC 100pg Flyer","HP Instant Ink 2Free Worten 100pg Flyer","HP Instant Ink 50 page per month plan HP Support for Spain without encoding","HP Instant Ink 100 page per month plan HP Support for Spain without encoding","HP Instant Ink 300 page per month plan HP Support for Spain without encoding","HP Instant Ink 50pg Carrefour Spain Plan","HP Instant Ink 100p Carrefour Spain Plan","HP Instant Ink 300p Carrefour Spain Plan","FR Consumer Default Offer","HP FR Support 50pg","HP FR Support 100pg","HP FR Support 300pg","HP Instant Ink 2Free Boulanger FR 100p Plan","HP Instant Ink 50pg Darty Web Plan","HP Instant Ink 100pg Darty Web Plan","HP Instant Ink 300pg Darty Web Plan","HP Instant Ink 2Free 100pg France Flyer","HP Instant Ink 1Free HP Store FR Any Pln","HP Instant Ink 1Free Cdiscount 50p Pln","HP Instant Ink 1Free Cdiscount 100p Pln","HP Instant Ink 1Free Cdiscount 300p Pln","HP Instant Ink Boulanger 50pg Ecode Pln","HP Instant Ink Boulanger 100pg Ecode Pln","HP Instant Ink Boulanger 300pg Ecode Pln","HP Instant Ink 50 page per month plan HP Support for France without encoding","HP Instant Ink 100 page per month plan HP Support for France without encoding","HP Instant Ink 300 page per month plan HP Support for France without encoding","IT Consumer Default Offer","NZ Consumer Default Offer","UK Consumer Default Offer","HP Instant Ink 50 page per month plan with JLP encoding","HP Instant Ink 100 page per month plan with JLP encoding","HP Instant Ink 300 page per month plan with JLP encoding","UK Consumer Freemium Offer","HP UK Support 300pg","HP UK Support 100pg","HP UK Support 50pg","HP Instant Ink for Staples 50pg UK Plan","HP Instant Ink for Staples 100pg UK Plan","HP Instant Ink for Staples 300pg UK Plan","HP Instant Ink for HP Store 100p UK Plan","HP Instant Ink for HP Store 300p UK Plan","HP Instant Ink 2 months free 100pg Plan for DSG without encoding","HP Instant Ink 2Free DSG Any Plan","HP Instant Ink 2Free HHO UK 300pg Plan","HP Instant Ink 2Free JLP Any Plan","HP Instant Ink 2Free Argos Any Plan","HP Instant Ink 3Free TESCO 50pg Plan","HP Instant Ink 1Free Argos Any Plan M0J00AE","HP Instant Ink 2Free HP Store UK Any Plan","HP Instant Ink 50pg Rymans UK Web Plan","HP Instant Ink 100pg Rymans UK Web Plan","HP Instant Ink 300pg Rymans UK Web Plan","HP Instant Ink for HHO 50pg UK Plan","HP Instant Ink 2Free Argos Any Pln Flyer","HP Instant Ink 3Free Tesco UK 50pg Flyer","HP Instant Ink UK 15pg Flyer","HP Instant Ink 50 page per month plan HP Support for UK without encoding","HP Instant Ink 100 page per month plan HP Support for UK without encoding","HP Instant Ink 300 page per month plan HP Support for UK without encoding","US Consumer Default Offer","HP Support 50pg Plan","HP Support 100pg Plan","HP Support 300pg Plan","US Consumer Freemium Offer","US Consumer 99 Cent Offer","HP Instant Ink 100 page per month Seed Units","HP Instant Ink HSN 100 page per month plan without encoding","HP Instant Ink 50pg OMX Web Plan","HP Instant Ink 100pg OMX Web Plan","HP Instant Ink 300pg OMX Web Plan","HP Support HHO Derivative Offer","HP Instant Ink Promo 300pg Plan F6U91AN","HP Instant Ink for Staples 50p Web Plan","HP Instant Ink for Staples 100p Web Plan","HP Instant Ink for Staples 300p Web Plan","HP Instant Ink for OD 50pg Web Plan","HP Instant Ink for OD 100pg Web Plan","HP Instant Ink for OD 300pg Web Plan","BlogHer opportunity","HP Instant Ink QVC1 Any Page Plan","HP Instant Ink QVC2 Any Page Plan","HP Instant Ink HSN1 Any Page Plan","HP Instant Ink HSN2 Any Page Plan","Best Buy II 1.5 Customer Promo","Office Depot II 1.5 Customer Promo","HP Support II 1.5 Customer Promo","HP Instant Ink Web 50pg Plan","HP Instant Ink Web 100pg Plan","HP Instant Ink Web 300pg Plan","HP Instant Ink 500 page Plan","HP Instant Ink 6Free 300pg NA Plan L0S98AN","HP Instant Ink 3Free HPC Upgrd Any Plan","HP Instant Ink Pre-Sale 1Free Any Plan US","Shiyun Prepaid Test Codes","HP Instant Ink Prepaid 60 Costco Any Pln","HP Instant Ink Prepaid 120 Any Plan","HP Instant Ink Prepaid 240 Any Plan","HP Instant Ink Promo 300p Train Any Pln","HP Instant Ink Prepaid 20 Any Pln","HP Instant Ink Prepaid 30 Any Pln","HP 61 Clr/Blk Inst Ink Cmbo w/Card 2-Pk","LUPs Pilot - TARGET.COM","LUPs Pilot - UNITED STATIONERS SUPPLY","LUPs Pilot - TARGET STORES","LUPs Pilot - HP Home & Home Office Store","LUPs Pilot - FRY'S","LUPs Pilot - New Age","LUPs Pilot - D&H DISTRIBUTING COMPANY","LUPs Pilot - AMAZON","LUPs Pilot - SYNNEX","LUPs Pilot - FRY'S ELECTRONICS INC","LUPs Pilot - TECH DATA PRODUCT MANAGEM","LUPs Pilot - INGRAM MICRO INC.","LUPs Pilot - SYNNEX 2","LUPs Pilot - D&H DISTRIBUTING COMPANY 2","HP Instant Ink US 15pg Flyer","HP Instant Ink US Any 15/50/100/300p Pln","HP Instant Ink 50pg AMZ Plan","HP Instant Ink 100pg AMZ Plan","HP Instant Ink 300pg AMZ Plan","LUPs Pilot - GENERIC RETAILER","HP Instant Ink Any w/ Free for HSN Plan"]

AGENA_SEEDS_DISTINCT_OFFERS_CLEARING_HOUSE_NOT_HPAGENA_BY_NAME = ["HP Instant Ink for Staples 50pg Plan Canada","HP Instant Ink for Staples 100pg Plan Canada","HP Instant Ink for Staples 300pg Plan Canada","HP Instant Ink for Best Buy 50pg Plan Canada","HP Instant Ink for Best Buy 100pg Plan Canada","HP Instant Ink for Best Buy 300pg Plan Canada","HP Instant Ink 50 page per month plan for Germany ","HP Instant Ink 100 page per month plan for Germany ","HP Instant Ink 300 page per month plan for Germany ","HP Instant Ink 50 page per month plan for Spain","HP Instant Ink 100 page per month plan for Spain","HP Instant Ink 300 page per month plan for Spain","HP Instant Ink 50 page per month plan for France","HP Instant Ink 100 page per month plan for France","HP Instant Ink 300 page per month plan for France","HP Instant Ink 100pg GB Plan","HP Instant Ink 300pg GB Plan","HP Instant Ink 50pg GB Plan","HP Instant Ink 50pg BHN Plan F6T36AN","HP Instant Ink 100pg BHN Plan F6T37AN","HP Instant Ink 300pg BHN Plan F6T38AN","HP Instant Ink 50pg Plan 2014","HP Instant Ink 100pg Plan 2014","HP Instant Ink 300pg Plan 2014","HP Instant Ink for Best Buy 50pg Plan 2014","HP Instant Ink for Best Buy 100pg Plan 2014","HP Instant Ink for Best Buy 300pg Plan 2014","HP Instant Ink Prepaid 60 Any Pg Plan","HP Instant Ink 50pg OMX/OD Plan","HP Instant Ink 100pg OMX/OD Plan","HP Instant Ink 300pg OMX/OD Plan"]

AGENA_CUSTOM_DSL_ENDPOINTS = {
    "all the offers" => "offers",
    "the default offers for US customers" => "offers?region=US&default=true&type=consumer",
    "the default offers for UK customers" => "offers?region=UK&default=true&type=consumer",
    "the default offers for CA customers" => "offers?region=CA&default=true&type=consumer",
    "the default offers for DE customers" => "offers?region=DE&default=true&type=consumer",
    "the default offers for FR customers" => "offers?region=FR&default=true&type=consumer",
    "the default offers for ES customers" => 'offers?region=ES&default=true&type=consumer',
    "all the US promo codes" => "promo_codes?region=US",
    "all the promo codes" => "promo_codes"
}

def agena_map_str_to_endpoint(endpoint_raw)
  AGENA_CUSTOM_DSL_ENDPOINTS[endpoint_raw]
end

def agena_internal_plans_check(data, data_key, data_pk, table, columns_to_check)
  fail_message = ""
  if table.hashes.length != data[data_key].length
    fail_message = "Expected length to be #{table.hashes.length} but was #{data[data_key].length}. Below is the obtained data:"
    data[data_key].each do |row|
      fail_message += "\n" + row.to_s
    end
  else
    row_count = 1
    table.hashes.each do |row|
      row_ok = true
      find_by_pk = data[data_key].find { |plan| plan[data_pk] == row[data_pk] }
      if find_by_pk.nil?
        fail_message += "#{data_pk} = [#{row[data_pk]}] not found on agena JSON" + "\n"
      else
        columns_to_check.each do |r|
          if find_by_pk[r] != row[r]
            row_ok = false
            actual_data = find_by_pk[r] ? find_by_pk[r] : "<not found>"
            fail_message += "Row #{row_count}: #{r} was #{actual_data} but was expected to be #{row[r]}" + "\n"
          end
        end
        if row_ok
          puts "Row #{row_count}: ok"
        end
      end
      row_count += 1
    end
  end
  fail_message
end

def agena_plans_check(offer, table, columns_to_check)
  agena_internal_plans_check(offer, 'plans', 'guid', table, columns_to_check)
end

def agena_promo_code_plans_check(promo_code, table, columns_to_check)
  agena_internal_plans_check(promo_code, 'promo_plan_incentives', 'plan', table, columns_to_check)
end

def agena_promo_code_plans_incentives_check(promo_code_validation, table, columns_to_check)
  agena_internal_plans_check(promo_code_validation, 'incentives', 'plan_guid', table, columns_to_check)
end

def agena_offers_response_validation(keys_on_first_level, keys_inside_plans)
  fail_message = ""
  i = 0
  @json.each do |offer|
    fail_message += agena_single_offer_response_validation(offer, i, keys_on_first_level, keys_inside_plans)
    i += 1
  end
  fail_message
end

def agena_offers_find_by_plan_guid(offers, guid)
  offer_by_guid = nil
  offers.each do |offer|
    if offer['plans'].length > 0
      offer['plans'].each do |plan|
        offer_by_guid = offer if plan['guid'] == guid
      end
    end
  end
  offer_by_guid
end

def agena_single_offer_response_validation(offer, offer_index, keys_on_first_level, keys_inside_plans)
  fail_message = ""
  keys_on_first_level.each do |k|
    fail_message += "missing #{k} on #{offer_index} |" unless offer.key?(k)
  end
  offer['plans'].each do |plan|
    plans_index = 0
    keys_inside_plans.each do |k|
      fail_message += "missing #{k} on #{offer_index}.plans[#{plans_index}] |" unless plan.key?(k)
    end
    plans_index += 1
  end
  fail_message
end

def agena_printer_incentives_response_validation(hash_data)
  fail_message = ""
  keys = ['product_name', 'model_number', 'region', 'classification', 'oobe_incentive_eligibility_days', 'oobe_incentive_free_months', 'enrollment_kit_incentive_free_months']
  keys.each do |k|
    fail_message += "missing #{k} on printer incentives |" unless hash_data.key?(k)
  end
  fail_message
end

def agena_guid_by_title(title, region)
  begin
    AGENA_GUID_TITLE_PER_REGION[region.strip.to_sym][title]
  rescue NoMethodError
    byebug
  end
end

def agena_extract_gemini_plans_info(offer)
  plans = []
  offer['plans'].each do |p|
    price = p['priceCents'].to_i == 0? "FREE" : p['priceCents']
    plans.push({'guid' => p['guid'], 'pages' => p['pages'], 'priceCents' => price, 'originalPriceCents' => p['priceCents']})
  end
  plans
end

def agena_extract_gemini_plans_info_from_table(table)
  plans = []
  table.hashes.each do |row|
    price = row['priceCents'].to_i == 0? "FREE" : row['priceCents']
    plans.push({'guid' => '', 'pages' => row['pages'], 'priceCents' => price, 'originalPriceCents' => p['priceCents']})
  end
  plans
end

def agena_extract_plans_region_info(offer)
  if offer['plans'].length > 0
    region = offer['plans'][0]['region']
    offer['plans'].each do |p|
      if p['region'] != region
        fail "Plans regions should be the same, but offer #{offer['identifier']} doesn't follow this rule"
      end
    end
  else
    puts "Beware, offer #{offer['identifier']} has 0 plans!"
    region = ''
  end
  region
end